# Dicionário 
#{Empresa:{quantidade:int, cotacao:float}}

#Abrindo arquivo e lendo os dados
with open('teslateste.txt','r') as tesla:
    serie= tesla.read()

#Spliting o arquivo nos pontos onde há quebra de linha
linhas= serie.split('\n')

#Lista tempo e lista cotação

tempo=[]
cotacao=[]
#Percorre a lista linhas e adiciona os elementos em sua devida lista
for linha in linhas:
       if len(linha)> 1:
            x,y = linha.split(',')
            tempo.append(int(x))
            cotacao.append(int(y))

#Parametros iniciais
saldo=150
q=0 #quantidade inicial de ações

#Contadores
            
j=0    
for e in range(0, len(tempo)): #loop principal 
    carteira={'Tesla':{'quantidade':q, 'cotacao':cotacao[j]}}
    valor = cotacao[j]
    print('\n A cotação atual é de: U${0} \n'.format(valor))
    print('Seu saldo autal é de: U${0} \n'.format(saldo))
    print('Você tem {0} disponíveis em sua carteira \n'.format(q))
    opcao=input('Digite buy para comprar ou sell para vender (ou sair): ')
    if opcao=='sair':
        break
    
    n=int(input('\n Digite a quantidade que deseja comprar ou vender:'))
    
    if opcao =='buy':
        if saldo>cotacao[j]:
            q+= n
            saldo-=n*valor
        else: 
            print('Você não possui saldo suficiente para comprar essa ação \n')
    elif opcao =='sell':
        if q>0:
            q-= n
            saldo+=n*valor
        else:
            print('Você não possui ações disponíveis para venda \n') 
    j+=1
